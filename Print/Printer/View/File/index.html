{//打印管理界面}
<extend name="Public/template/printerbase.html"/>
<block name='title'>{$title}</block>
<block name='header'>
<IF condition='$history'>
<include file="./Public/template/printernav.html" list="current_page_item"/>
<ELSE/>
<include file="./Public/template/printernav.html" manage="current_page_item"/>
</IF>
</block>
<block name='content'>
<div class="title" >
    <h2>{$title}</h2>
</div>
<div class="files_record">
    <table border="0">
        <tr>
            <td align="center">待打印文件</td>
            <td align="center">上传者</td>
            <td align="center">上传时间</td>
            <td align="center">文件打印状态</td>
        </tr>
        <volist name="data" id="vo">
        <tr>
            <td><a id="{$vo.id}_1" href="__UPLOAD__/{$vo.url}">{$vo.name}</a> </td><td>{$vo.use_name}</td><td>{$vo.time}</td><td>{$vo.status}</td>
        <if condition="$history">
        <else />
            <td>
                <button type="button" id="{$vo.id}" data-toggle="popover" data-trigger="focus" title="Failed" data-content="Try again" data-complete-text="Downloaded"class="btn btn-primary" autocomplete="off">New File</button>
            </td>
            <script>
                $(document).ready(function(){
                    $("#{$vo.id}").popover();
                });
                $("#{$vo.id}").on('click',function(){
                    var request = $.ajax({
                        url: "__URL__/set/fid/{$vo.id}/status/{$vo.status}"
                    })
                    request.done(function(jqXHR){
                        if(jqXHR.response)
                        {
                            $(this).button('complete');
                        }
                        else
                        {
                            $(this).popover('toggle');
                        }
                    });
                });
            </script>
        </if>
        </tr>
        </volist>
    </table>
</div>
</block>
